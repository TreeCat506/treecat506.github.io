<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>共和曆日曆</title>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --paper-color: #fdfbf7; --pencil-texture: url('https://www.transparenttextures.com/patterns/sketch-header.png'); }
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; font-family: 'Noto Serif TC', serif; background-color: var(--paper-color); }
        #bg-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; z-index: 1; filter: contrast(1.2) saturate(1.3) brightness(1.1) sepia(0.2); transition: background-image 1s ease-in-out; }
        #texture-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: var(--pencil-texture); opacity: 0.6; z-index: 2; pointer-events: none; }
        .sketch-filter { filter: url(#pencil-svg-filter); }
        .calendar-card { position: relative; z-index: 3; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80%; max-width: 400px; background: rgba(255, 255, 255, 0.85); padding: 40px 20px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 2px solid #555; border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px; }
        .republic-date { font-size: 2.5rem; font-weight: 700; color: #2c3e50; margin-bottom: 10px; }
        .republic-object { font-size: 1.8rem; color: #d35400; font-family: 'Caveat', cursive; margin-bottom: 25px; display: block; }
        .gregorian-date { font-size: 1rem; color: #7f8c8d; border-top: 1px dashed #999; padding-top: 15px; letter-spacing: 2px; font-family: 'Caveat', cursive; font-weight: bold; }
    </style>
</head>
<body>
    <svg style="display: none;"><defs><filter id="pencil-svg-filter"><feTurbulence type="fractalNoise" baseFrequency="0.01" numOctaves="3" result="noise" /><feDisplacementMap in="SourceGraphic" in2="noise" scale="3" /></filter></defs></svg>
    <div id="bg-image"></div>
    <div id="texture-overlay"></div>
    <div class="calendar-card sketch-filter">
        <div id="content">
            <div class="republic-date" id="rep-date">載入中...</div>
            <div class="republic-object" id="rep-object"></div>
            <div class="gregorian-date" id="greg-date"></div>
        </div>
    </div>
    <script>
        // 這裡包含簡化的共和曆邏輯 (以12月3日為例)
        const republicanMonths = ["葡月", "霧月", "霜月", "雪月", "雨月", "風月", "芽月", "花月", "牧月", "獲月", "熱月", "果月"];
        // 為了演示效果，我們使用固定的示例資料
        // 實際應用需要完整的365天對照表
        function getRepublicanDate(date) {
            // 強制模擬：如果是12月3日，回傳雪松日
            const month = date.getMonth() + 1;
            const day = date.getDate();
            
            // 簡易邏輯：目前只設定12月3日及前後幾天的演示
            // 如果您在不同日子開啟，會顯示一個預設值
            if (month === 12 && day === 3) {
                return { m: "霜月", d: "雪松日", obj: "Cèdre", key: "Cedar tree" };
            } else if (month === 12 && day === 4) {
                return { m: "霜月", d: "冷杉日", obj: "Sapin", key: "Fir tree" };
            }
            
            // 預設Fallback (非特定日期的顯示)
            return { m: "共和曆", d: "今日", obj: "Nature", key: "Nature sketch" };
        }

        function updateCalendar() {
            const now = new Date(); // 抓取當下時間
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const twTime = new Date(utc + (3600000 * 8)); // 轉台灣時間
            
            document.getElementById('greg-date').innerText = `${twTime.getMonth() + 1}月 ${twTime.getDate()}日`;
            
            const rep = getRepublicanDate(twTime);
            document.getElementById('rep-date').innerText = `${rep.m} ${rep.d}`;
            document.getElementById('rep-object').innerText = rep.obj;

            // 抓取圖片
            const imgUrl = `https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?auto=format&fit=crop&w=1600&q=80`; // 預設森林圖
            // 若要動態搜尋 (Unsplash API需Key，此處用靜態圖模擬風格)
            // 這裡我們用一張符合"雪松/自然"氣氛的圖
            document.getElementById('bg-image').style.backgroundImage = `url('https://source.unsplash.com/1600x900/?${encodeURIComponent(rep.key)},botanical')`;
        }
        updateCalendar();
    </script>
</body>
</html>
